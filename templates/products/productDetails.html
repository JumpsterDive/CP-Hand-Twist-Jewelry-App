{% extends 'base/base.html' %}
{% load static %}

{% block title %}
<title>Products Detail Page</title>
{% endblock title %}

{% block content %} 

<!--Main layout-->
<main class="mt-1 pt-1">
    <div class="container mt-1">
        <!--Grid row-->
        <div class="row">
            <!--Grid column-->
            <div class="col-md-6 mb-4">

                {% for image in productDetail.product_image.all %}
                {% if image.is_feature %}
                
                <img src="{{image.images.url}}" class="w-100" alt="Responsive Image"/>
                
                {% endif %}
                {% endfor %}

               
            </div>
            <!--Grid column-->

            <!--Grid column-->
            <div class="col-md-6 mb-4">
                <!--Content-->
                <div class="p-4">
                   

                    <p class="lead">
                        <span>
                            ${{ productDetail.regular_price }}
                        </span>
                
                    </p>

                    <strong><p style="font-size: 20px;">Description</p></strong>

                    <p>{{productDetail.description}}</p>

                    <form class="d-flex justify-content-left">
                        <!-- Default input -->
                        <div class="form-outline me-1" style="width: 100px;">
                            <label for="quantitySelect">Qty</label>
                                <input type="number" class="form-control" id="quantitySelect" />
                        </div>
                        <button type="button" value="{{productDetail.id}}" class="btn btn-secondary btn-sm ms-1" id="add-button"  >
                            Add to cart
                            <i class="fas fa-shopping-cart ms-1"></i>
                        </button>
                    </form>

                    <!-- Product Type -->
                    <div class="col-12">
                        <label for="select">{{productDetail.product_type}} (IN WORK)</label>
                        <input type="number" value="" class="form-control "
                            id="select" />
                    </div>

                </div>
                <!--Content-->
            </div>
            <!--Grid column-->
        </div>
        <!--Grid row-->

        <hr />

        <!--Grid row-->
        <div class="row">

            {% for image in productDetail.product_image.all %}
                {% if not image.is_feature %}
                
                    <img src="{{image.images.url}}" class="img-fluid img-thumbnail " style=" width: 100px; height:100px; border-radius:15px;  padding:1px; " alt="{{image.alt_text}}" />
                
                {% endif %}
            {% endfor %}
            
        </div>
        <!--Grid row-->

         <!--Grid row-->
         <div class="row d-flex justify-content-center">
            <!--Grid column-->
            <div class="col-md-12 text-center">
                <h4 class="my-4 h4">Additional information</h4>

                <p>{{productDetail.additional_description}}</p>
            </div>
            <!--Grid column-->
        </div>
        <!--Grid row-->
    </div>
</main>
<!--Main layout-->

<script>
    $(document).on('click','#add-button',function(e){
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: "{% url 'shopcart:shopcart_add' %}",
            data: {
                productid: $('#add-button').val(),
                productqty: $('#quantitySelect').val(),     
                csrfmiddlewaretoken: "{{csrf_token}}",
                action: 'post'
            },
            success: function (json) {
                // console.log(json)  //DEBUG
                document.getElementById("shopping-cart-qty").innerHTML = json.qty
            },
            error: function (xhr, errmsg, err) {}
        });
    })
</script>


{% endblock content %}